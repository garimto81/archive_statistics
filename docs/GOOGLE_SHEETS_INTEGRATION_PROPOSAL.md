# Google Sheets ìë™ ì—°ë™ ì„¤ê³„ì„œ

**ì‘ì„±ì¼**: 2025-12-09
**ë²„ì „**: 2.0
**ìƒíƒœ**: Approved

---

## 1. ê°œìš”

### 1.1 ëª©ì 

Google Sheetsì— ì €ì¥ëœ ì‘ì—…ìë³„ ì‘ì—… í˜„í™© ë°ì´í„°ë¥¼ **ìë™ìœ¼ë¡œ ë™ê¸°í™”**í•˜ì—¬ Archive Statistics Dashboardì—ì„œ ì‹¤ì‹œê°„ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤.

### 1.2 í•µì‹¬ ì›ì¹™

| ì›ì¹™ | ì„¤ëª… |
|------|------|
| **ìë™ ë™ê¸°í™”** | ìˆ˜ë™ CSV import ì—†ì´ ë°±ê·¸ë¼ìš´ë“œì—ì„œ ìë™ ì—°ë™ |
| **Service Account** | Google Service Account APIë¥¼ í†µí•œ ì¸ì¦ |
| **ì£¼ê¸°ì  ê°±ì‹ ** | ì„¤ì •ëœ ê°„ê²©ìœ¼ë¡œ ë°ì´í„° ìë™ ê°±ì‹  |
| **ì‹¤ì‹œê°„ ëŒ€ì‹œë³´ë“œ** | ì‘ì—…ìë³„ ì§„í–‰ë¥ , ì „ì²´ ì‘ì—…ëŸ‰ ì‹¤ì‹œê°„ í‘œì‹œ |

---

## 2. ì•„í‚¤í…ì²˜

### 2.1 ì‹œìŠ¤í…œ êµ¬ì„±ë„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Google Sheets (Source of Truth)               â”‚
â”‚  - ì‘ì—…ìë³„ ì‘ì—… í˜„í™©                                            â”‚
â”‚  - Archive/Category/Status/PIC/Videos ì •ë³´                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ Google Sheets API
                           â”‚ (Service Account)
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Archive Statistics Backend                    â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              SheetsSync Service                           â”‚   â”‚
â”‚  â”‚  - ì£¼ê¸°ì  ë™ê¸°í™” (APScheduler)                            â”‚   â”‚
â”‚  â”‚  - gspread ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©                                 â”‚   â”‚
â”‚  â”‚  - ë°ì´í„° íŒŒì‹± ë° ì •ê·œí™”                                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â”‚                                      â”‚
â”‚                           â–¼                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              SQLite (work_status table)                   â”‚   â”‚
â”‚  â”‚  - ë™ê¸°í™”ëœ ì‘ì—… í˜„í™© ì €ì¥                                 â”‚   â”‚
â”‚  â”‚  - ì‘ì—…ìë³„ í†µê³„ ìºì‹±                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                           â”‚                                      â”‚
â”‚                           â–¼                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              REST API                                      â”‚   â”‚
â”‚  â”‚  GET /api/worker-stats      - ì‘ì—…ì í†µê³„                  â”‚   â”‚
â”‚  â”‚  GET /api/worker-stats/summary - ì „ì²´ ìš”ì•½                 â”‚   â”‚
â”‚  â”‚  GET /api/sync/status       - ë™ê¸°í™” ìƒíƒœ                  â”‚   â”‚
â”‚  â”‚  POST /api/sync/trigger     - ìˆ˜ë™ ë™ê¸°í™” íŠ¸ë¦¬ê±°           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Frontend (React)                              â”‚
â”‚  Work Status í˜ì´ì§€                                              â”‚
â”‚  â”œâ”€â”€ Tasks íƒ­: ì‘ì—… ëª©ë¡ í…Œì´ë¸”/ì¹¸ë°˜                            â”‚
â”‚  â””â”€â”€ Workers íƒ­: ì‘ì—…ìë³„ í†µê³„ ëŒ€ì‹œë³´ë“œ                          â”‚
â”‚      â”œâ”€â”€ Summary Cards (ì´ ì‘ì—…ì, ì´ ë¹„ë””ì˜¤, ì™„ë£Œ, ë‚¨ì€ ì‘ì—…)   â”‚
â”‚      â”œâ”€â”€ Status Breakdown (ìƒíƒœë³„ ë¶„í¬)                          â”‚
â”‚      â”œâ”€â”€ Archive Breakdown (ì•„ì¹´ì´ë¸Œë³„ ë¶„í¬)                     â”‚
â”‚      â””â”€â”€ Worker Cards (ì‘ì—…ìë³„ ì§„í–‰ë¥ )                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 ë°ì´í„° íë¦„

```
1. [ì‹œì‘] APScheduler íŠ¸ë¦¬ê±° (ê¸°ë³¸: 30ë¶„ ê°„ê²©)
        â”‚
        â–¼
2. [ì¸ì¦] Service Account ìê²© ì¦ëª…ìœ¼ë¡œ Google Sheets API ì¸ì¦
        â”‚
        â–¼
3. [ì¡°íšŒ] ì§€ì •ëœ Sheetì—ì„œ ë°ì´í„° fetch
        â”‚
        â–¼
4. [íŒŒì‹±] í–‰ ë°ì´í„°ë¥¼ WorkStatus ê°ì²´ë¡œ ë³€í™˜
        â”‚
        â–¼
5. [ì €ì¥] DB upsert (ê¸°ì¡´ ë°ì´í„° ì—…ë°ì´íŠ¸ ë˜ëŠ” ì‹ ê·œ ì‚½ì…)
        â”‚
        â–¼
6. [ì™„ë£Œ] ë™ê¸°í™” ë¡œê·¸ ê¸°ë¡, ë‹¤ìŒ ì‹¤í–‰ ëŒ€ê¸°
```

---

## 3. ê¸°ìˆ  êµ¬í˜„

### 3.1 ì˜ì¡´ì„±

```toml
# pyproject.toml ë˜ëŠ” requirements.txt
gspread>=6.0.0            # Google Sheets API wrapper
google-auth>=2.0.0        # Service Account ì¸ì¦
apscheduler>=3.10.0       # ì£¼ê¸°ì  ì‘ì—… ìŠ¤ì¼€ì¤„ë§
```

### 3.2 Service Account ì„¤ì •

#### 3.2.1 Google Cloud Console ì„¤ì •

1. Google Cloud Consoleì—ì„œ í”„ë¡œì íŠ¸ ìƒì„±/ì„ íƒ
2. Google Sheets API í™œì„±í™”
3. Service Account ìƒì„±
4. JSON í‚¤ íŒŒì¼ ë‹¤ìš´ë¡œë“œ
5. Google Sheetì— Service Account ì´ë©”ì¼ ê³µìœ  (ë·°ì–´ ê¶Œí•œ)

#### 3.2.2 í™˜ê²½ ì„¤ì •

```env
# backend/.env
GOOGLE_SERVICE_ACCOUNT_FILE=credentials/service_account.json
GOOGLE_SHEETS_URL=https://docs.google.com/spreadsheets/d/SHEET_ID/edit
SHEETS_SYNC_INTERVAL_MINUTES=30
```

### 3.3 í•µì‹¬ ì½”ë“œ êµ¬ì¡°

#### 3.3.1 SheetsSync ì„œë¹„ìŠ¤

```python
# backend/app/services/sheets_sync.py

import gspread
from google.oauth2.service_account import Credentials
from apscheduler.schedulers.asyncio import AsyncIOScheduler

class SheetsSyncService:
    """Google Sheets ìë™ ë™ê¸°í™” ì„œë¹„ìŠ¤"""

    SCOPES = [
        'https://www.googleapis.com/auth/spreadsheets.readonly'
    ]

    def __init__(self, settings: Settings):
        self.settings = settings
        self.scheduler = AsyncIOScheduler()
        self._client: gspread.Client | None = None

    async def start(self):
        """ë™ê¸°í™” ì„œë¹„ìŠ¤ ì‹œì‘"""
        self.scheduler.add_job(
            self.sync,
            'interval',
            minutes=self.settings.sheets_sync_interval_minutes,
            id='sheets_sync'
        )
        self.scheduler.start()
        # ì‹œì‘ ì‹œ ì¦‰ì‹œ 1íšŒ ë™ê¸°í™”
        await self.sync()

    async def stop(self):
        """ë™ê¸°í™” ì„œë¹„ìŠ¤ ì¤‘ì§€"""
        self.scheduler.shutdown()

    def _get_client(self) -> gspread.Client:
        """Google Sheets í´ë¼ì´ì–¸íŠ¸ íšë“"""
        if self._client is None:
            creds = Credentials.from_service_account_file(
                self.settings.google_service_account_file,
                scopes=self.SCOPES
            )
            self._client = gspread.authorize(creds)
        return self._client

    async def sync(self) -> SyncResult:
        """Google Sheetsì—ì„œ ë°ì´í„° ë™ê¸°í™”"""
        client = self._get_client()
        sheet = client.open_by_url(self.settings.google_sheets_url)
        worksheet = sheet.get_worksheet(0)  # ì²« ë²ˆì§¸ ì‹œíŠ¸

        records = worksheet.get_all_records()

        # DBì— upsert
        synced_count = 0
        for record in records:
            work_status = self._parse_record(record)
            await self._upsert_work_status(work_status)
            synced_count += 1

        return SyncResult(
            success=True,
            synced_at=datetime.now(),
            total_records=len(records),
            synced_count=synced_count
        )

    def _parse_record(self, record: dict) -> WorkStatusCreate:
        """ì‹œíŠ¸ í–‰ì„ WorkStatus ê°ì²´ë¡œ ë³€í™˜"""
        return WorkStatusCreate(
            archive_name=record.get('Archive', ''),
            category=record.get('Category', ''),
            title=record.get('Title', ''),
            status=record.get('Status', 'ëŒ€ê¸°'),
            pic=record.get('PIC', ''),
            total_videos=int(record.get('Total Videos', 0)),
            done_videos=int(record.get('Done Videos', 0)),
            notes=record.get('Notes', '')
        )
```

#### 3.3.2 Sync API ì—”ë“œí¬ì¸íŠ¸

```python
# backend/app/api/sync.py

from fastapi import APIRouter, Depends

router = APIRouter(prefix="/api/sync", tags=["sync"])

@router.get("/status")
async def get_sync_status():
    """ë™ê¸°í™” ìƒíƒœ ì¡°íšŒ"""
    return {
        "last_sync": sync_service.last_sync_time,
        "next_sync": sync_service.next_sync_time,
        "status": sync_service.status,
        "error": sync_service.last_error
    }

@router.post("/trigger")
async def trigger_sync():
    """ìˆ˜ë™ìœ¼ë¡œ ë™ê¸°í™” íŠ¸ë¦¬ê±°"""
    result = await sync_service.sync()
    return result
```

### 3.4 Google Sheets ìŠ¤í‚¤ë§ˆ (ì˜ˆìƒ)

| Column | Type | Description |
|--------|------|-------------|
| Archive | string | ì•„ì¹´ì´ë¸Œ ì´ë¦„ (WSOP, HCL ë“±) |
| Category | string | ì¹´í…Œê³ ë¦¬/ì„œë¸Œí´ë” |
| Title | string | ì‘ì—… ì œëª© |
| Status | string | ìƒíƒœ (ëŒ€ê¸°/ì‘ì—… ì¤‘/ê²€í† /ì™„ë£Œ) |
| PIC | string | ë‹´ë‹¹ì ì´ë¦„ |
| Total Videos | number | ì „ì²´ ë¹„ë””ì˜¤ ìˆ˜ |
| Done Videos | number | ì™„ë£Œëœ ë¹„ë””ì˜¤ ìˆ˜ |
| Notes | string | ë¹„ê³  |

---

## 4. UI ì„¤ê³„

### 4.1 Work Status í˜ì´ì§€ - Workers íƒ­

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Work Status                                    [ğŸ”„ Last sync: 5m ago]
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚  [Tasks] [Workers]                                               â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Summary                                                     â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚â”‚
â”‚  â”‚  â”‚ Total  â”‚ â”‚ Total  â”‚ â”‚Completedâ”‚ â”‚Remainingâ”‚              â”‚â”‚
â”‚  â”‚  â”‚Workers â”‚ â”‚ Videos â”‚ â”‚        â”‚ â”‚        â”‚               â”‚â”‚
â”‚  â”‚  â”‚   5    â”‚ â”‚  1,234 â”‚ â”‚   890  â”‚ â”‚   344  â”‚               â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Status Breakdown                                            â”‚â”‚
â”‚  â”‚  ëŒ€ê¸° â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  200                              â”‚â”‚
â”‚  â”‚  ì‘ì—… ì¤‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  144                           â”‚â”‚
â”‚  â”‚  ê²€í†  â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   90                            â”‚â”‚
â”‚  â”‚  ì™„ë£Œ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  890                              â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚  Workers                                                     â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚â”‚
â”‚  â”‚  â”‚   Richie    â”‚ â”‚    John     â”‚ â”‚    Kate     â”‚           â”‚â”‚
â”‚  â”‚  â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  â”‚ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘  â”‚ â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘  â”‚           â”‚â”‚
â”‚  â”‚  â”‚  80% done   â”‚ â”‚  60% done   â”‚ â”‚  40% done   â”‚           â”‚â”‚
â”‚  â”‚  â”‚ 400/500     â”‚ â”‚ 300/500     â”‚ â”‚ 190/234     â”‚           â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 ë™ê¸°í™” ìƒíƒœ í‘œì‹œ

- í—¤ë”ì— ë§ˆì§€ë§‰ ë™ê¸°í™” ì‹œê°„ í‘œì‹œ
- ìˆ˜ë™ ë™ê¸°í™” ë²„íŠ¼ (ğŸ”„)
- ë™ê¸°í™” ì§„í–‰ ì¤‘ ë¡œë”© ì¸ë””ì¼€ì´í„°
- ì—ëŸ¬ ë°œìƒ ì‹œ ì•Œë¦¼ í‘œì‹œ

---

## 5. êµ¬í˜„ ê³„íš

### Phase 1: Backend ì„¤ì • (0.5ì¼)

- [ ] gspread, google-auth, apscheduler ì˜ì¡´ì„± ì¶”ê°€
- [ ] Service Account ì„¤ì • ë° í™˜ê²½ë³€ìˆ˜ êµ¬ì„±
- [ ] config.pyì— Sheets ê´€ë ¨ ì„¤ì • ì¶”ê°€

### Phase 2: SheetsSync ì„œë¹„ìŠ¤ (1ì¼)

- [ ] services/sheets_sync.py êµ¬í˜„
- [ ] ë™ê¸°í™” ë¡œì§ ë° ì—ëŸ¬ í•¸ë“¤ë§
- [ ] DB upsert ë¡œì§
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

### Phase 3: API ì—”ë“œí¬ì¸íŠ¸ (0.5ì¼)

- [ ] /api/sync/status ì—”ë“œí¬ì¸íŠ¸
- [ ] /api/sync/trigger ì—”ë“œí¬ì¸íŠ¸
- [ ] ê¸°ì¡´ worker-stats APIì™€ ì—°ë™

### Phase 4: Frontend í†µí•© (0.5ì¼)

- [ ] ë™ê¸°í™” ìƒíƒœ í‘œì‹œ ì»´í¬ë„ŒíŠ¸
- [ ] ìˆ˜ë™ ë™ê¸°í™” ë²„íŠ¼
- [ ] ì—ëŸ¬ ì•Œë¦¼ ì²˜ë¦¬

### Phase 5: í…ŒìŠ¤íŠ¸ ë° ë°°í¬ (0.5ì¼)

- [ ] E2E í…ŒìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
- [ ] Docker ì„¤ì • (credentials ë³¼ë¥¨ ë§ˆìš´íŠ¸)
- [ ] ë°°í¬ ë° ê²€ì¦

---

## 6. ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

| í•­ëª© | ëŒ€ì‘ |
|------|------|
| Service Account í‚¤ | .gitignoreì— ì¶”ê°€, í™˜ê²½ë³€ìˆ˜ë¡œ ê²½ë¡œ ì§€ì • |
| Sheet ì ‘ê·¼ ê¶Œí•œ | ì½ê¸° ì „ìš© ê¶Œí•œë§Œ ë¶€ì—¬ |
| API Rate Limiting | ë™ê¸°í™” ê°„ê²© ì¡°ì ˆ (ê¸°ë³¸ 30ë¶„) |
| ì—ëŸ¬ ë¡œê¹… | ë¯¼ê° ì •ë³´ ì œì™¸í•˜ê³  ë¡œê¹… |

---

## 7. ì œì™¸ ì‚¬í•­ (v2.0)

ê¸°ì¡´ ë¬¸ì„œì—ì„œ ì œì•ˆí–ˆë˜ ë‹¤ìŒ ê¸°ëŠ¥ë“¤ì€ í˜„ì¬ ìš”êµ¬ì‚¬í•­ì—ì„œ **ì œì™¸**:

- âŒ CSV Import ê¸°ëŠ¥ (ìˆ˜ë™ ì—…ë¡œë“œ ë¶ˆí•„ìš”)
- âŒ poker_hands í…Œì´ë¸” (ë³„ë„ ê¸°ëŠ¥)
- âŒ Hand Analysis í˜ì´ì§€ (ë³„ë„ ê¸°ëŠ¥)
- âŒ NAS-Sheets ë§¤ì¹­ (ë³„ë„ ê¸°ëŠ¥)

---

## 8. ê´€ë ¨ ë¬¸ì„œ

- [PRD](../tasks/prds/0001-prd-archive-statistics.md)
- [Work Status API](../backend/app/api/work_status.py)
- [Worker Stats API](../backend/app/api/worker_stats.py)

---

## Appendix: Service Account ì„¤ì • ê°€ì´ë“œ

### A.1 Google Cloud Consoleì—ì„œ Service Account ìƒì„±

1. https://console.cloud.google.com ì ‘ì†
2. í”„ë¡œì íŠ¸ ì„ íƒ ë˜ëŠ” ìƒˆë¡œ ìƒì„±
3. "APIs & Services" > "Enabled APIs & services"
4. "+ ENABLE APIS AND SERVICES" í´ë¦­
5. "Google Sheets API" ê²€ìƒ‰ í›„ í™œì„±í™”

### A.2 Service Account í‚¤ ìƒì„±

1. "APIs & Services" > "Credentials"
2. "+ CREATE CREDENTIALS" > "Service account"
3. ì´ë¦„ ì…ë ¥ (ì˜ˆ: archive-stats-sheets)
4. ìƒì„± ì™„ë£Œ í›„ Service Account í´ë¦­
5. "KEYS" íƒ­ > "ADD KEY" > "Create new key" > JSON
6. ë‹¤ìš´ë¡œë“œëœ JSON íŒŒì¼ì„ `backend/credentials/` í´ë”ì— ì €ì¥

### A.3 Google Sheetì— ê³µìœ 

1. ëŒ€ìƒ Google Sheet ì—´ê¸°
2. "ê³µìœ " ë²„íŠ¼ í´ë¦­
3. Service Account ì´ë©”ì¼ ì…ë ¥ (ì˜ˆ: xxx@project.iam.gserviceaccount.com)
4. "ë·°ì–´" ê¶Œí•œìœ¼ë¡œ ê³µìœ 
