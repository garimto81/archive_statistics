---
name: work-block
description: Block-aware automated workflow with user final validation only
---

# /work-block - ë¸”ëŸ­ ê¸°ë°˜ ìë™ ì›Œí¬í”Œë¡œìš°

ë¸”ëŸ­ ì—ì´ì „íŠ¸ ì‹œìŠ¤í…œì„ í™œìš©í•˜ì—¬ **ì‚¬ìš©ì ìµœì¢… ê²€ì¦ ì „ê¹Œì§€** ëª¨ë“  ì‘ì—…ì„ ìë™ ì‹¤í–‰í•©ë‹ˆë‹¤.

## Usage

```bash
/work-block <ì‘ì—… ì§€ì‹œ>
/work-block "NAS ìŠ¤ìº” ì„±ëŠ¥ ìµœì í™”"
/work-block --block scanner.metadata "ffprobe íƒ€ì„ì•„ì›ƒ ê°œì„ "
```

## íŠ¹ì§•

| ê¸°ì¡´ /work | /work-block |
|------------|-------------|
| ìˆ˜ë™ ìŠ¹ì¸ ë‹¤ìˆ˜ | ìµœì¢… 1íšŒë§Œ ìŠ¹ì¸ |
| ì „ì²´ ì½”ë“œë² ì´ìŠ¤ ë¶„ì„ | ë¸”ëŸ­ ë‹¨ìœ„ ë¶„ì„ |
| ë²”ìš© ì—ì´ì „íŠ¸ | ë„ë©”ì¸ ì „ë¬¸ ì—ì´ì „íŠ¸ |
| ì‹¤íŒ¨ ì‹œ ìˆ˜ë™ ê°œì… | ìë™ ìˆ˜ì • (2íšŒ) |

## ì‹¤í–‰ íë¦„

```
/work-block ì‹¤í–‰
    â”‚
    â”œâ”€ Phase 0: Pre-Work (ìë™)
    â”‚      â”œâ”€ ì†”ë£¨ì…˜ ê²€ìƒ‰ (GitHub, ì›¹)
    â”‚      â”œâ”€ ì¤‘ë³µ ì´ìŠˆ/PR í™•ì¸
    â”‚      â””â”€ Make vs Buy ë¶„ì„
    â”‚      â”‚
    â”‚      â–¼ ìë™ ì§„í–‰ (ì¤‘ë³µ ì—†ìœ¼ë©´)
    â”‚
    â”œâ”€ Phase 1: Block ë¶„ì„ (ë³‘ë ¬)
    â”‚      â”‚
    â”‚      â”œâ”€â–¶ Orchestrator Agent
    â”‚      â”‚      â””â”€ ì‘ì—… ë¶„ë°°
    â”‚      â”‚
    â”‚      â”œâ”€â–¶ Scanner Domain Agent (ë³‘ë ¬)
    â”‚      â”‚      â””â”€ scanner.* ë¸”ëŸ­ ì˜í–¥ ë¶„ì„
    â”‚      â”‚
    â”‚      â”œâ”€â–¶ Progress Domain Agent (ë³‘ë ¬)
    â”‚      â”‚      â””â”€ progress.* ë¸”ëŸ­ ì˜í–¥ ë¶„ì„
    â”‚      â”‚
    â”‚      â””â”€â–¶ Sync Domain Agent (ë³‘ë ¬)
    â”‚             â””â”€ sync.* ë¸”ëŸ­ ì˜í–¥ ë¶„ì„
    â”‚
    â”‚      ê²°ê³¼: AffectedBlocks = [...]
    â”‚      â”‚
    â”‚      â–¼ ìë™ ì§„í–‰
    â”‚
    â”œâ”€ Phase 2: ì´ìŠˆ + ë¬¸ì„œ (ìë™)
    â”‚      â”œâ”€ GitHub ì´ìŠˆ ìƒì„±
    â”‚      â”œâ”€ PRD ìƒì„±/ì—…ë°ì´íŠ¸
    â”‚      â””â”€ ê´€ë ¨ ë¬¸ì„œ ì—…ë°ì´íŠ¸
    â”‚      â”‚
    â”‚      â–¼ ìë™ ì§„í–‰
    â”‚
    â”œâ”€ Phase 3: TDD ê°œë°œ (ë¸”ëŸ­ ë‹¨ìœ„)
    â”‚      â”‚
    â”‚      For each block in AffectedBlocks:
    â”‚      â”‚
    â”‚      â”œâ”€ AGENT_RULES.md ë¡œë”©
    â”‚      â”‚     â””â”€ ë²”ìœ„, ì œì•½ì‚¬í•­, ì˜ì¡´ì„± í™•ì¸
    â”‚      â”‚
    â”‚      â”œâ”€ ğŸ”´ RED: í…ŒìŠ¤íŠ¸ ì‘ì„±
    â”‚      â”‚     â””â”€ ìë™ ì»¤ë°‹
    â”‚      â”‚
    â”‚      â”œâ”€ ğŸŸ¢ GREEN: êµ¬í˜„
    â”‚      â”‚     â””â”€ ìë™ ì»¤ë°‹
    â”‚      â”‚
    â”‚      â””â”€ â™»ï¸ REFACTOR: ê°œì„ 
    â”‚            â””â”€ ìë™ ì»¤ë°‹
    â”‚      â”‚
    â”‚      â–¼ ìë™ ì§„í–‰
    â”‚
    â”œâ”€ Phase 4: ê²€ì¦ (ë³‘ë ¬)
    â”‚      â”‚
    â”‚      â”œâ”€â–¶ /parallel test
    â”‚      â”‚     â”œâ”€ Unit Test
    â”‚      â”‚     â”œâ”€ Integration Test
    â”‚      â”‚     â”œâ”€ E2E Test
    â”‚      â”‚     â””â”€ Security Test
    â”‚      â”‚
    â”‚      â””â”€â–¶ /parallel review
    â”‚            â”œâ”€ Security Agent
    â”‚            â”œâ”€ Logic Agent
    â”‚            â”œâ”€ Style Agent
    â”‚            â””â”€ Performance Agent
    â”‚
    â”‚      ì‹¤íŒ¨ ì‹œ: ìë™ ìˆ˜ì • ì‹œë„ (ìµœëŒ€ 2íšŒ)
    â”‚      â”‚
    â”‚      â–¼ ìë™ ì§„í–‰
    â”‚
    â”œâ”€ Phase 5: PR ì¤€ë¹„ (ìë™)
    â”‚      â”œâ”€ ìµœì¢… ì»¤ë°‹
    â”‚      â”œâ”€ PR ìƒì„±
    â”‚      â””â”€ ë³´ê³ ì„œ ì‘ì„±
    â”‚
    â”‚      â”‚
    â”‚      â–¼
    â”‚
    â””â”€ ğŸ›‘ ì‚¬ìš©ì ìµœì¢… ê²€ì¦
           â”‚
           â”œâ”€ [ìŠ¹ì¸] â†’ PR ë¨¸ì§€
           â”œâ”€ [ìˆ˜ì • ìš”ì²­] â†’ í”¼ë“œë°± ê¸°ë°˜ ì¬ì‘ì—…
           â””â”€ [ì·¨ì†Œ] â†’ ë¸Œëœì¹˜ ì‚­ì œ
```

## ë¸”ëŸ­ ì—ì´ì „íŠ¸ ì—°ë™

### Domain Agents

| Domain | Agent | AGENT_RULES |
|--------|-------|-------------|
| Scanner | `scanner-domain` | `.claude/agents/scanner-domain.md` |
| Progress | `progress-domain` | `.claude/agents/progress-domain.md` |
| Sync | `sync-domain` | `.claude/agents/sync-domain.md` |

### Block Rules

| Block | AGENT_RULES |
|-------|-------------|
| `scanner.*` | `backend/app/api/AGENT_RULES.md`, `services/AGENT_RULES.md` |
| `progress.*` | `backend/app/api/AGENT_RULES.md`, `models/AGENT_RULES.md` |
| `sync.*` | (êµ¬í˜„ ì˜ˆì •) |

### ì»¨í…ìŠ¤íŠ¸ ê²©ë¦¬

```
ë¸”ëŸ­ ë‹¨ìœ„ ì‘ì—… ì‹œ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ë¡œë”©ë˜ëŠ” ì»¨í…ìŠ¤íŠ¸:                                  â”‚
â”‚  â€¢ í•´ë‹¹ ë¸”ëŸ­ì˜ AGENT_RULES.md                       â”‚
â”‚  â€¢ í•´ë‹¹ ë¸”ëŸ­ì˜ ì†ŒìŠ¤ íŒŒì¼ (15~25ê°œ)                  â”‚
â”‚  â€¢ í•´ë‹¹ ë¸”ëŸ­ì˜ í…ŒìŠ¤íŠ¸ íŒŒì¼                          â”‚
â”‚                                                      â”‚
â”‚  ë¡œë”© ì•ˆ ë¨ (ì»¨í…ìŠ¤íŠ¸ ì˜¤ì—¼ ë°©ì§€):                    â”‚
â”‚  â€¢ ë‹¤ë¥¸ ë¸”ëŸ­ì˜ íŒŒì¼                                 â”‚
â”‚  â€¢ ë¬´ê´€í•œ ë¬¸ì„œ                                      â”‚
â”‚  â€¢ ì „ì²´ í”„ë¡œì íŠ¸ íŒŒì¼                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ìë™ ì§„í–‰ ì¡°ê±´

| Phase | ìë™ ì§„í–‰ ì¡°ê±´ | ì¤‘ë‹¨ ì¡°ê±´ |
|-------|----------------|-----------|
| 0 â†’ 1 | ì¤‘ë³µ ì´ìŠˆ ì—†ìŒ | ì¤‘ë³µ ë°œê²¬ |
| 1 â†’ 2 | ì˜í–¥ ë¸”ëŸ­ â‰¤3ê°œ | 4ê°œ ì´ìƒ |
| 2 â†’ 3 | ì´ìŠˆ ìƒì„± ì™„ë£Œ | - |
| 3 â†’ 4 | TDD ì™„ë£Œ | - |
| 4 â†’ 5 | Critical 0ê°œ | Critical ë°œê²¬ (ìë™ ìˆ˜ì • ì‹œë„) |
| 5 â†’ ê²€ì¦ | PR ìƒì„± ì™„ë£Œ | - |

## ìë™ ìˆ˜ì • ì •ì±…

```python
# ì‹¤íŒ¨ ì‹œ ìë™ ìˆ˜ì • ë¡œì§
max_attempts = 3
for attempt in range(max_attempts):
    result = run_validation()

    if result.success:
        break

    if attempt < max_attempts - 1:
        # ìë™ ìˆ˜ì • ì‹œë„
        fix_errors(result.errors)
        commit_fix()
    else:
        # 3íšŒ ì‹¤íŒ¨ â†’ ìˆ˜ë™ ê°œì… ìš”ì²­
        create_failed_issue()
        halt_workflow()
```

## ì˜µì…˜

| ì˜µì…˜ | ì„¤ëª… | ì˜ˆì‹œ |
|------|------|------|
| `--block <id>` | íŠ¹ì • ë¸”ëŸ­ë§Œ ëŒ€ìƒ | `--block scanner.metadata` |
| `--skip-pre-work` | Pre-Work ìŠ¤í‚µ | `--skip-pre-work` |
| `--no-auto-fix` | ìë™ ìˆ˜ì • ë¹„í™œì„±í™” | `--no-auto-fix` |
| `--strict` | 1íšŒ ì‹¤íŒ¨ ì‹œ ì¤‘ë‹¨ | `--strict` |
| `--dry-run` | ì‹¤í–‰ ì—†ì´ ê³„íšë§Œ ì¶œë ¥ | `--dry-run` |

## ì˜ˆì‹œ

### ê¸°ë³¸ ì‹¤í–‰

```bash
$ /work-block "NAS ìŠ¤ìº” ì„±ëŠ¥ ìµœì í™”"

ğŸ” Phase 0: Pre-Work
   âœ“ ì†”ë£¨ì…˜ ê²€ìƒ‰: ê´€ë ¨ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—†ìŒ
   âœ“ ì¤‘ë³µ í™•ì¸: ê´€ë ¨ ì´ìŠˆ ì—†ìŒ
   â–¶ ìë™ ì§„í–‰

ğŸ§© Phase 1: Block ë¶„ì„
   Orchestrator: ì‘ì—… ë¶„ë°° ì¤‘...
   â”œâ”€ Scanner Domain: scanner.metadata ì˜í–¥ í™•ì¸
   â”œâ”€ Progress Domain: ì˜í–¥ ì—†ìŒ
   â””â”€ Sync Domain: ì˜í–¥ ì—†ìŒ

   ì˜í–¥ ë¸”ëŸ­: ["scanner.metadata"]
   â–¶ ìë™ ì§„í–‰

ğŸ“ Phase 2: ì´ìŠˆ + ë¬¸ì„œ
   âœ“ ì´ìŠˆ ìƒì„±: #45 - NAS ìŠ¤ìº” ì„±ëŠ¥ ìµœì í™”
   âœ“ PRD ì—…ë°ì´íŠ¸: tasks/prds/0001-prd-archive-statistics.md
   â–¶ ìë™ ì§„í–‰

ğŸ”¨ Phase 3: TDD ê°œë°œ [scanner.metadata]
   ğŸ“‹ AGENT_RULES ë¡œë”©: backend/app/services/AGENT_RULES.md

   ğŸ”´ RED: tests/test_scanner.py::test_optimized_ffprobe
      âœ“ ì»¤ë°‹: test: Add ffprobe optimization test (RED)

   ğŸŸ¢ GREEN: services/scanner.py
      âœ“ ì»¤ë°‹: feat: Implement ffprobe optimization (GREEN)

   â™»ï¸ REFACTOR: íƒ€ì„ì•„ì›ƒ ë¡œì§ ê°œì„ 
      âœ“ ì»¤ë°‹: refactor: Improve timeout handling

   â–¶ ìë™ ì§„í–‰

ğŸ§ª Phase 4: ê²€ì¦
   /parallel test ì‹¤í–‰ ì¤‘...
   â”œâ”€ Unit: 24/24 âœ…
   â”œâ”€ Integration: 8/8 âœ…
   â”œâ”€ E2E: 5/5 âœ…
   â””â”€ Security: 12/12 âœ…

   /parallel review ì‹¤í–‰ ì¤‘...
   â”œâ”€ Security: Pass
   â”œâ”€ Logic: Pass
   â”œâ”€ Style: 2 warnings
   â””â”€ Performance: Pass

   Score: 92/100
   â–¶ ìë™ ì§„í–‰

ğŸ“¦ Phase 5: PR ì¤€ë¹„
   âœ“ ìµœì¢… ì»¤ë°‹ ì™„ë£Œ
   âœ“ PR ìƒì„±: #46

ğŸ›‘ ì‚¬ìš©ì ìµœì¢… ê²€ì¦ ëŒ€ê¸° ì¤‘...

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ì‘ì—… ì™„ë£Œ - ê²€ì¦ ìš”ì²­

ìš”ì•½:
  â€¢ ì‘ì—…: NAS ìŠ¤ìº” ì„±ëŠ¥ ìµœì í™”
  â€¢ ì˜í–¥ ë¸”ëŸ­: scanner.metadata
  â€¢ ë³€ê²½: +45/-12 lines

í…ŒìŠ¤íŠ¸: 49/49 âœ…
ë¦¬ë·°: 92/100

PR: #46 - NAS ìŠ¤ìº” ì„±ëŠ¥ ìµœì í™”

[âœ… ìŠ¹ì¸]  [ğŸ“ ìˆ˜ì • ìš”ì²­]  [âŒ ì·¨ì†Œ]
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

### íŠ¹ì • ë¸”ëŸ­ ì§€ì •

```bash
$ /work-block --block progress.hand "90% ì™„ë£Œ ë¡œì§ ê°œì„ "

ğŸ§© Phase 1: Block ë¶„ì„
   ì§€ì • ë¸”ëŸ­: progress.hand
   AGENT_RULES: backend/app/models/AGENT_RULES.md
   â–¶ Phase 2ë¡œ ì§„í–‰...
```

## ì—°ë™ ì»¤ë§¨ë“œ

| ë‚´ë¶€ í˜¸ì¶œ | ì„¤ëª… |
|-----------|------|
| `/pre-work` | Phase 0ì—ì„œ ìë™ í˜¸ì¶œ |
| `/parallel test` | Phase 4ì—ì„œ ìë™ í˜¸ì¶œ |
| `/parallel review` | Phase 4ì—ì„œ ìë™ í˜¸ì¶œ |
| `/tdd` | Phase 3ì—ì„œ ì°¸ì¡° |
| `/commit` | ê° Phaseì—ì„œ ìë™ í˜¸ì¶œ |
| `/create-pr` | Phase 5ì—ì„œ ìë™ í˜¸ì¶œ |

## ì°¸ì¡°

- [AUTOMATED_WORKFLOW.md](../../docs/AUTOMATED_WORKFLOW.md) - ì „ì²´ ì›Œí¬í”Œë¡œìš° ì„¤ê³„
- [BLOCK_AGENT_SYSTEM.md](../../docs/BLOCK_AGENT_SYSTEM.md) - ë¸”ëŸ­ ì—ì´ì „íŠ¸ ì•„í‚¤í…ì²˜
- `.claude/agents/` - ë„ë©”ì¸ ì—ì´ì „íŠ¸ ê·œì¹™
